function mapUrls(b){var l={reader:"Read on Marvel Unlimited",purchase:"Buy Digital Copy ",detail:"Details on Marvel"},e=[],g,a;for(a=0;a<b.length;a+=1)(g=l[b[a].type]||"")&&e.push({type:g,url:b[a].url});return 0<e.length?e:[{type:"Marvel.com",url:"http://www.marvel.com"}]}
angular.module("xReadingList").service("MarvelService",["$http",function(b){function l(a){return function(c,d,b,e){c.data&&c.data.results&&0<c.data.results.length&&(a.coverRoot=c.data.results[0].thumbnail.path,a.extension=c.data.results[0].thumbnail.extension,a.urls=mapUrls(c.data.results[0].urls))}}function e(a,c,d,b){var e=b+100;return function(b,h,f,k){if(b.data&&b.data.results)for(h=0;h<b.data.results.length;h+=1)for(k=b.data.results[h],f=0;f<d.length;f+=1)if(d[f].number===k.issueNumber.toString()){d[f].coverRoot=
k.thumbnail.path;d[f].extension=k.thumbnail.extension;d[f].urls=mapUrls(k.urls);break}b.data.offset+b.data.count<b.data.total&&b.data.limit===b.data.count&&g(a,c,e,d)}}function g(a,c,d,g){b.get("http://gateway.marvel.com:80/v1/public/comics?title="+a+"&startYear="+c+"&offset="+d+"&limit=100&noVariants=true&apikey=2c7b5e832ec9ddc7c4dc4e432f24fbb4",{cache:!0}).success(e(a,c,g,d))}return{getMarvelData:function(a){b.get("http://gateway.marvel.com:80/v1/public/comics?title="+a.series+"&startYear="+a.volume+
"&issueNumber="+a.number+"&noVariants=true&apikey=2c7b5e832ec9ddc7c4dc4e432f24fbb4",{cache:!0}).success(l(a))},getMarvelVolumeData:g}}]);
