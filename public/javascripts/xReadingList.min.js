var xReadingListApp=angular.module("xReadingList",["infinite-scroll"]);
xReadingListApp.controller("QueryController",["$http","$location","$anchorScroll","NameList","Collection",function(c,d,e,b,f){var a=this;a.issues=0;a.startYear=1963;a.endYear=2015;a.titles=new b.CreateList("Titles",!1);a.characters=new b.CreateList("Characters",!0);a.writers=new b.CreateList("Writers",!1);a.pencillers=new b.CreateList("Pencillers",!1);a.inkers=new b.CreateList("Inkers",!1);a.collection=new f.CreateCollection;a.showQuery=!0;a.lists=[a.titles,a.characters,a.writers,a.pencillers,a.inkers];
a.hideResults=function(){a.showQuery=!0;d.hash("query");e()};a.query=function(){c.post("/issues",{requiredCharacters:a.characters.allOf,optionalCharacters:a.characters.anyOf,excludedCharacters:a.characters.excluded,optionalTitles:a.titles.anyOf,excludedTitles:a.titles.excluded,optionalWriters:a.writers.anyOf,excludedWriters:a.writers.excluded,optionalPencillers:a.pencillers.anyOf,excludedPencillers:a.pencillers.excluded,optionalInkers:a.inkers.anyOf,excludedInkers:a.inkers.excluded,startYear:Math.min(a.startYear),
endYear:Math.max(a.endYear)}).success(function(b,c,f,g){a.issues=b.length;a.showQuery=!1;a.collection.clear();a.collection.addIssues(b);d.hash("results-list");e()})}}]);$(function(){$(window).scroll(function(){var c=$(window).scrollTop();$(".fixed-title").each(function(){c>$(this).parent().offset().top?($(".fixed-title").removeClass("fixed"),$(this).addClass("fixed")):$(this).removeClass("fixed")})});$(".selecting").click(function(){$(this).toggleClass("fixed-title");$(this).removeClass("fixed")})});
