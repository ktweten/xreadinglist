function addNameToList(d,b){b.push(d);b.sort()}function removeNameFromList(d,b){var f=b.indexOf(d);0<=f&&b.splice(f,1)}
angular.module("xReadingList").factory("NameList",["$http","$filter",function(d,b){return{CreateList:function(f,g){var a=this;a.title=f;a.names=[];a.allOf=[];a.anyOf=[];a.excluded=[];a.selecting=!1;a.hasAllColumn=g;a.limit=50;a.displayList=[];a.searchText="";d.post("/list",{listName:f}).success(function(c){c&&0<c.length&&(a.names=c[0].names,a.names.sort())});this.updateDisplayList=function(){a.displayList=a.searchText?b("filter")(a.names,a.searchText):a.names;a.displayList=b("limitTo")(a.displayList,
a.limit)};this.setSelecting=function(){a.selecting=!a.selecting;a.limit=50;a.updateDisplayList()};this.increaseLimit=function(){a.limit+=50;a.updateDisplayList()};this.clearSelections=function(){a.allOf=[];a.anyOf=[];a.excluded=[]};this.getDescription=function(){var c=[];0<a.allOf.length&&c.push("All of: "+a.allOf.join(", "));0<a.anyOf.length&&c.push("Any of: "+a.anyOf.join(", "));0<a.excluded.length&&c.push("Excluding: "+a.excluded.join(", "));return c};this.toggleList=function(c,b){var e,d;"All"===
c?(e=a.allOf,d=[a.anyOf,a.excluded]):"Any"===c?(e=a.anyOf,d=[a.allOf,a.excluded]):"Exclude"===c&&(e=a.excluded,d=[a.allOf,a.anyOf]);if(0<=e.indexOf(b))removeNameFromList(b,e);else for(addNameToList(b,e),e=0;e<d.length;e+=1)removeNameFromList(b,d[e])}}}}]);
