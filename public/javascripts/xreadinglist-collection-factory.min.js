function issueSort(g,a){return isNaN(g.number)?1:isNaN(a.number)?-1:Number(g.number)-Number(a.number)}
angular.module("xReadingList").factory("Collection",["MarvelService",function(g){return{CreateCollection:function(){var a=this;a.comics=[];a.debug="?";a.clear=function(){a.comics=[]};a.getSeries=function(f){var b=null,c;for(c=0;c<a.comics.length;c+=1)if(a.comics[c].name===f){b=a.comics[c];break}b||(b={name:f,volumes:[],issues:[]},a.comics.push(b));return b};a.getIssues=function(a,b){var c=null,d;for(d=0;d<a.volumes.length;d+=1)if(a.volumes[d].name===b){c=a.volumes[d].issues;break}c||(c={name:b,issues:[],
selectedIssue:!1,expand:!1},a.volumes.push(c),c=c.issues);return c};a.addIssues=function(f){var b,c,d,e,h=[];a.debug="";for(c=0;c<f.length;c+=1){e=f[c];b=a.getSeries(e.series,a.comics);d=a.getIssues(b,e.volume);e.number||(e.number="Oneshot");for(b=0;b<d.length&&d[b].number!==e.number;b+=1);b===d.length?(e.coverRoot="http://i.annihil.us/u/prod/marvel/i/mg/b/40/image_not_available",e.extension="jpg",e.urls=[{type:"Marvel.com",url:"http://www.marvel.com"}],0>h.indexOf(e.series)&&(h.push(e.series),g.getMarvelVolumeData(e.series,
e.volume,0,d)),d.push(e),d.sort(issueSort)):(e.coverRoot=d[b].coverRoot,e.extension=d[b].extension,e.urls=d[b].urls,d[b]=e)}}}}}]);
